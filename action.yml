name: 'Direnv'
description: 'Install, allow, and load direnv'
inputs: {}
outputs: {}
runs:
  using: "composite"
  steps:
    - run: |
       curl --retry 5 --retry-all-errors -sfL https://direnv.net/install.sh \
         | sed 's/curl/curl --retry 5 --retry-all-errors --header "authorization: Bearer ${{ github.token }}"/g' \
         | bash
      shell: bash
    - run: direnv allow
      shell: bash
    - run: direnv export gha >> "$GITHUB_ENV"
      shell: bash
